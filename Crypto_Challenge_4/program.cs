using System;
using System.Collections.Generic;
using System.Linq;
using System.Numerics;
using System.Text;

namespace ConsoleApp1
{
    class Program
    {
        public static string encText =
            "531441 614125 493039 592704 328509 389017 274625 456533 274625 571787 456533 614125 300763 373248 389017 474552 592704 373248 328509 314432 274625 551368 421875 274625 571787 328509 636056 328509 551368 314432 493039 592704 658503 328509 551368 328509 274625 438976 438976 592704 373248 328509 405224 328509 658503 328509 438976 571787 493039 343000 357911 493039 438976 300763 493039 474552 314432 274625 274625 658503 274625 389017 592704 389017 474552 357911 456533 328509 493039 474552 456533 704969 571787 493039 438976 614125 592704 389017 493039 474552 493039 343000 592704 373248 389017 571787 328509 474552 389017 357911 456533 274625 300763 493039 456533 456533 274625 389017 274625 456533 531441 614125 389017 592704 328509 571787 614125 551368 328509 592704 373248 274625 592704 389017 571787 373248 493039 614125 438976 314432 287496 328509 614125 474552 274625 287496 438976 328509 592704 493039 328509 274625 551368 474552 592704 373248 328509 456533 314432 493039 592704 274625 474552 314432 704969 328509 592704 300763 493039 456533 456533 274625 531441 614125 493039 592704 328509 571787 274625 389017 314432 438976 328509 357911 551368 274625 474552 314432 300763 493039 456533 456533 274625 531441 614125 493039 592704 328509 592704 373248 328509 571787 493039 438976 614125 592704 389017 493039 474552 389017 571787 287496 704969 474552 493039 456533 328509 274625 474552 571787 571787 493039 314432 389017 343000 343000 389017 300763 614125 438976 592704 274625 571787 704969 493039 614125 456533 389017 357911 373248 592704 287496 328509 438976 328509 314432 592704 493039 389017 456533 274625 357911 389017 474552 328509 343000 551368 493039 456533 592704 373248 328509 343000 389017 551368 571787 592704 373248 274625 571787 592704 704969 389017 474552 571787 512000 328509 300763 592704 389017 493039 474552 493039 343000 592704 373248 328509 300763 373248 274625 551368 274625 300763 592704 328509 551368 571787 314432 493039 592704 531441 614125 493039 592704 328509 1000 1000 314432 274625 571787 373248 314432 274625 571787 373248 328509 314432 357911 274625 551368 274625 438976 274625 474552 512000 493039 328509 389017 474552 592704 373248 328509 357911 493039 438976 314432 314432 274625 571787 373248 287496 614125 357911 1000 1000 658503 328509 438976 438976 314432 493039 474552 328509 300763 493039 456533 456533 274625 704969 493039 614125 300763 493039 456533 512000 438976 328509 592704 328509 314432 274625 438976 438976 493039 343000 592704 373248 328509 300763 551368 704969 512000 592704 493039 300763 373248 274625 438976 438976 328509 474552 357911 328509 571787 300763 493039 456533 456533 274625 274625 474552 314432 512000 551368 493039 636056 328509 474552 704969 493039 614125 551368 571787 328509 438976 343000 592704 493039 373248 274625 636056 328509 274625 357911 493039 493039 314432 614125 474552 314432 328509 551368 571787 592704 274625 474552 314432 389017 474552 357911 493039 343000 343000 614125 474552 314432 274625 456533 328509 474552 592704 274625 438976 571787 421875 389017 438976 438976 571787 389017 474552 300763 551368 704969 512000 592704 274625 474552 274625 438976 704969 571787 389017 571787 314432 493039 592704 551368 328509 456533 274625 389017 474552 389017 474552 357911 389017 571787 592704 493039 551368 328509 512000 438976 274625 300763 328509 704969 493039 614125 551368 300763 551368 704969 512000 592704 274625 474552 274625 438976 704969 571787 389017 571787 373248 274625 592704 343000 493039 551368 592704 373248 274625 592704 493039 343000 274625 300763 551368 704969 512000 592704 493039 357911 551368 274625 512000 373248 328509 551368 571787 314432 493039 592704 343000 493039 438976 438976 493039 658503 592704 373248 328509 614125 551368 438976 287496 328509 438976 493039 658503 592704 493039 592704 274625 421875 328509 512000 274625 551368 592704 493039 343000 592704 373248 328509 300763 551368 704969 512000 592704 493039 438976 274625 287496 389017 474552 571787 592704 551368 614125 300763 592704 389017 493039 474552 571787 314432 493039 592704 1000 1000 373248 592704 592704 512000 571787 300763 493039 438976 493039 474552 571787 438976 274625 571787 373248 571787 438976 274625 571787 373248 438976 614125 474552 314432 357911 551368 328509 474552 314432 493039 592704 512000 373248 314432 571787 438976 274625 571787 373248 389017 592704 571787 328509 636056 328509 474552 343000 389017 636056 328509 343000 493039 614125 551368 274625 571787 438976 274625 571787 373248 592704 658503 493039 729000 328509 551368 493039 592704 658503 493039 592704 373248 551368 328509 328509 571787 438976 274625 571787 373248 438976 571787 438976 274625 571787 373248 592704 373248 551368 328509 328509 571787 328509 636056 328509 474552 571787 328509 636056 328509 474552 592704 373248 551368 328509 328509 314432 493039 592704 729000 389017 512000";
        public static BigInteger ModInverse(BigInteger a, BigInteger mod)
        {
            BigInteger i = mod, v = 0, d = 1;
            while (a > 0)
            {
                BigInteger t = i / a, x = a;
                a = i % x;
                i = x;
                x = d;
                d = v - t * x;
                v = x;
            }
            v %= mod;
            if (v < 0) v = (v + mod) % mod;
            return v;
        }

        public static BigInteger FindFactor(BigInteger N)
        {
            for (BigInteger i = 2; i * i <= N; i++)
            {
                if (N % i == 0)
                    return i;
            }
            return N;
        }

        public static BigInteger Decrypt(BigInteger c, BigInteger d, BigInteger N)
        {
            return BigInteger.ModPow(c, d, N);
        }

        public static BigInteger[] ConvertToBigIntegerArray(string cipherText)
        {
            return cipherText.Split(' ')
                .Select(block => BigInteger.Parse(block))
                .ToArray();
        }

        public static string ToASCIIString(BigInteger value)
        {
            byte[] bytes = value.ToByteArray();
            Array.Reverse(bytes);
            return Encoding.ASCII.GetString(bytes);
        }

        static void Main()
        {
            BigInteger N = 25379426616919;
            BigInteger e = 3;
            BigInteger p = FindFactor(N);
            BigInteger q = N / p;

            BigInteger phiN = (p - 1) * (q - 1);
            BigInteger d = ModInverse(e, phiN);

            BigInteger[] cipherTextBlocks = ConvertToBigIntegerArray(encText);
            StringBuilder asciiResult = new StringBuilder();

            foreach (BigInteger c in cipherTextBlocks)
            {
                BigInteger m = Decrypt(c, d, N);

                asciiResult.Append(ToASCIIString(m));
            }

            //Console.WriteLine("ASCII String: " + asciiResult.ToString());
            //Console.WriteLine("");
            Console.WriteLine(ConvertText(asciiResult.ToString()));

        }

        public static string ConvertText(string input)
        {
            string result = input;

            result = result.Replace("COMMA", ",");
            result = result.Replace("QUOTE", "\"");
            result = result.Replace("DOT", ".");
            result = result.Replace("QUESTIONMARK", "?");
            result = result.Replace("DASH", "-");
            result = result.Replace("COLON", ":");
            result = result.Replace("SLASH", "/");
            result = result.Replace("ONE", "1");
            result = result.Replace("TWO", "2");
            result = result.Replace("THREE", "3");
            result = result.Replace("FOUR", "4");
            result = result.Replace("FIVE", "5");
            result = result.Replace("SIX", "6");
            result = result.Replace("SEVEN", "7");
            result = result.Replace("EIGHT", "8");
            result = result.Replace("NINE", "9");
            result = result.Replace("TEN", "10");
            result = result.Replace("ZERO", "0");
            result = result.Replace("XX", "\n");

            return result;
        }
    }
}